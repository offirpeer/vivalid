!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.vivalid=t()}}(function(){return(require=function t(e,i,n){function a(r,o){if(!i[r]){if(!e[r]){var u="function"==typeof require&&require;if(!o&&u)return u(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[r]={exports:{}};e[r][0].call(d.exports,function(t){var i=e[r][1][t];return a(i?i:t)},d,d.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}({1:[function(t,e,i){e.exports={VERSION:"0.1.0",DEBUG:!1,validInputTagNames:["input","textarea","select"],keyStrokedInputTypes:["text","email","password","search","hidden"],ERROR:{mandatorySuccessFailure:"passing callbacks for onValidationSuccess and onValidationFailure is mandatory"}}},{}],2:[function(t,e,i){function n(t){return Array.prototype.slice.call(t)}function a(t){"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)}function s(t,e){e||(e=document);for(var i=[],n=0;n<t.length;n++)for(var a=e.getElementsByTagName(t[n]),s=0;s<a.length;s++)i.push(a[s]);return i}function r(t,e){for(;t&&t!==document;t=t.parentNode)if(h(t,e))return t;return!1}function o(t,e){return n(t.getElementsByTagName("*")).filter(function(t){return h(t,e)?!0:void 0})}function u(){var t=document.createElement("div");return t.setAttribute("data-a-b","c"),!(!t.dataset||"c"!==t.dataset.aB)}function l(t,e){return t.nodeType!==Node.ELEMENT_NODE?!1:t.getAttribute("data-"+p(e))}function d(t,e){return t.nodeType!==Node.ELEMENT_NODE?!1:t.dataset[e]}function h(t,e){return t.nodeType===Node.ELEMENT_NODE&&t.hasAttribute("data-"+p(e))}function p(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function c(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function v(t,e){t.classList?t.classList.add(e):c(t,e)||(t.className+=" "+e)}function _(t,e){if(t.classList)t.classList.remove(e);else if(c(t,e)){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ")}}var f=u();e.exports={getDataSet:f?d:l,hasDataSet:h,getElementsByTagNames:s,getClosestParentByAttribute:r,getChildrenByAttribute:o,ready:a,toArray:n,addClass:v,removeClass:_}},{}],3:[function(t,e,i){function n(t,e){if("function"!=typeof e)throw"error while trying to add a custom callback: argument must be a function";if(_[t])throw"error while trying to add a custom callback: "+t+" already exists";_[t]=e}function a(t){function e(){inputElems=p.getElementsByTagNames(v,t).filter(function(t){return p.hasDataSet(t,"vivalidTuples")});var e=u(t,inputElems);o(t,e)}p.ready(e)}function s(){function t(){function t(t,a){if(!t)throw"an input validation is missing a group, input id: "+a.id;t._groupId||(t._groupId=e++),i[t._groupId]||(i[t._groupId]=[],n[t._groupId]=t),i[t._groupId].push(a)}var e=1,i={},n={};p.getElementsByTagNames(v).filter(function(t){return p.hasDataSet(t,"vivalidTuples")}).forEach(function(e){t(p.getClosestParentByAttribute(e,"vivalidGroup"),e)});for(var a in i){var s=u(n[a],i[a]);o(n[a],s)}}p.ready(t)}function r(t){var e=f[t];e?e.reset():console.log("could not find group named "+t)}function o(t,e){groupName=p.getDataSet(t,"vivalidGroup"),f[groupName]=e}function u(t,e){var i,n,a,s,r=e.map(l),o=[null,null],u=[null,null];if(p.hasDataSet(t,"vivalidOnValidation")&&(o=JSON.parse(p.getDataSet(t,"vivalidOnValidation")),!Array.isArray(o)||2!==o.length))throw"data-vivalid-on-validation value should be an array of size 2";if(p.hasDataSet(t,"vivalidPendingUi")&&(u=JSON.parse(p.getDataSet(t,"vivalidPendingUi")),!Array.isArray(u)||2!==u.length))throw"data-vivalid-pending-ui value should be an array of size 2";return p.hasDataSet(t,"vivalidStatesChanged")&&(i=p.getDataSet(t,"vivalidStatesChanged")),p.hasDataSet(t,"vivalidPendingChanged")&&(n=p.getDataSet(t,"vivalidPendingChanged")),p.hasDataSet(t,"vivalidBeforeValidation")&&(a=p.getDataSet(t,"vivalidBeforeValidation")),p.hasDataSet(t,"vivalidAfterValidation")&&(s=p.getDataSet(t,"vivalidAfterValidation")),new h(r,p.getChildrenByAttribute(t,"vivalidSubmit"),_[o[0]],_[o[1]],_[u[0]],_[u[1]],i,n,_[a],_[s],p.getChildrenByAttribute(t,"vivalidReset"))}function l(t){var e,i=JSON.parse(p.getDataSet(t,"vivalidTuples"));p.hasDataSet(t,"vivalidResult")&&(e=p.getDataSet(t,"vivalidResult"));var n=p.hasDataSet(t,"vivalidBlurOnly");return new d(t,i,_[e],n)}var d=t("./input"),h=t("./input-group"),p=t("./dom-helpers"),c=t("./constants"),v=c.validInputTagNames,_={},f={};e.exports={addCallback:n,initAll:s,initGroup:a,resetGroup:r}},{"./constants":1,"./dom-helpers":2,"./input":6,"./input-group":4}],4:[function(t,e,i){function n(t,e,i,n,s,o,u,l,d,h,p){if(!i||!n)throw r.mandatorySuccessFailure;this._inputs=[],this._inputElems=[],this._submitElems=[],this._resetElems=[],this._onValidationSuccess=i,this._onValidationFailure=n,this._pendingUiStart=s,this._pendingUiStop=o,this._groupStatesChanged=u,this.onBeforeValidation=d,this.onAfterValidation=h,this._groupPendingChangedListeners=[],this._groupPendingChangedListeners.push(function(t){t||this._isPendingUiStartRun&&(this._pendingUiStop.call(this._pendingUiLastSubmitElem,this._inputElems,this._submitElems,this._resetElems),this._getOnSubmit.call(this).call(this._pendingUiLastSubmitElem),this._isPendingUiStartRun=!1,this._pendingUiLastSubmitElem={})}.bind(this)),l&&this._groupPendingChangedListeners.push(l),this._stateCounters={},this._stateCounters[a.invalid]=0,this._stateCounters[a.pending]=0,this._stateCounters[a.valid]=0,this._isPendingChangeTrueRun=!1,this._isPendingUiStartRun=!1,this._pendingUiLastSubmitElem={},this._inputs=t.map(function(t){return t.setGroup(this),t},this),this._inputElems=t.map(function(t){return t.el}),this._stateCounters[a.valid]=t.length,this._submitElems=Array.prototype.slice.call(e),this._submitElems.forEach(function(t){t.addEventListener("click",this._getOnSubmit.call(this))},this),p&&(this._resetElems=Array.prototype.slice.call(p),this._resetElems.forEach(function(t){t.addEventListener("click",this.reset.bind(this))},this))}var a=(t("./input"),t("./state-enum")),s=t("./constants").DEBUG,r=t("./constants").ERROR;n.prototype=function(){function t(){return this._triggerInputsValidation(),0===this._stateCounters[a.invalid]&&0===this._stateCounters[a.pending]}function e(){return this._triggerInputsValidation(),0===this._stateCounters[a.invalid]&&this._stateCounters[a.pending]>0}function i(){var t=this;return function(e){e&&e.preventDefault(),t._isPending()?(t._pendingUiStart.call(this,t._inputElems,t._submitElems,t._resetElems),t._isPendingUiStartRun=!0,t._pendingUiLastSubmitElem=this):t._isValid()?t._onValidationSuccess.call(this):t._onValidationFailure.call(this,t._stateCounters[a.invalid],t._stateCounters[a.pending],t._stateCounters[a.valid]),s&&(console.debug("cuurent states:"),console.debug("invalid: "+t._stateCounters[a.invalid]),console.debug("pending: "+t._stateCounters[a.pending]),console.debug("valid: "+t._stateCounters[a.valid]))}}function n(){this._inputs.forEach(function(t){t.triggerValidation()})}function r(t,e){t.stateEnum!==e.stateEnum&&(this._stateCounters[t.stateEnum]--,this._stateCounters[e.stateEnum]++)}function o(){this._groupStatesChanged&&this._groupStatesChanged(),this._groupPendingChangedListeners.forEach(function(t){!this._isPendingChangeTrueRun&&0===this._stateCounters[a.invalid]&&this._stateCounters[a.pending]>0?(t(!0),this._isPendingChangeTrueRun=!0):this._isPendingChangeTrueRun&&0===this._stateCounters[a.pending]&&(t(!1),this._isPendingChangeTrueRun=!1)},this)}function u(t){t&&t.preventDefault&&t.preventDefault(),this._inputs.forEach(function(t){t.reset()}),this._stateCounters[a.invalid]=0,this._stateCounters[a.pending]=0,this._stateCounters[a.valid]=this._inputs.length}return{updateGroupListeners:o,updateGroupStates:r,reset:u,_isValid:t,_isPending:e,_getOnSubmit:i,_triggerInputsValidation:n}}(),e.exports=n},{"./constants":1,"./input":6,"./state-enum":7}],5:[function(t,e,i){function n(){this.isNoneChecked=!1,this.validationState=new a("",s.valid),this.validationCycle=0,this.isChanged=!1,this.activeEventType=""}var a=t("./validation-state"),s=t("./state-enum");e.exports=n},{"./state-enum":7,"./validation-state":8}],6:[function(t,e,i){function n(t,e,i,n){function s(){var t=[];return e.forEach(function(e){var i=e[0],n=e[1];t.push({name:i,run:a.build(i,n)})}),t}function r(t,e,i,n){function a(t){return"vivalid-error"===t.nextSibling.className?t.nextSibling:void 0}function s(t,i){r=document.createElement("DIV"),r.className="vivalid-error",r.style.color="#ff0000";var n=document.createTextNode(e.message);r.appendChild(n),t.parentNode.insertBefore(r,t.nextSibling)}var r;if("input"===t.nodeName.toLowerCase()&&("radio"===t.type||"checkbox"===t.type)){var o=t.parentNode.querySelectorAll('input[name="'+t.name+'"]');t=o.item(o.length-1)}e.stateEnum===n.invalid?(r=a(t),r?r.textContent=e.message:s(t,e.message),t.style.borderStyle="solid",t.style.borderColor="#ff0000",l.addClass(t,"vivalid-error-input")):(r=a(t),r&&(r.parentNode.removeChild(r),t.style.borderStyle="",t.style.borderColor="",l.removeClass(t,"vivalid-error-input")))}if(-1===d.indexOf(t.nodeName.toLowerCase()))throw"only operates on the following html tags: "+d.toString();this._el=t,this._validatorsNameOptionsTuples=e,this._onInputValidationResult=i||r,this._isBlurOnly=n,this._validators=s(),this._inputState=new o,this._elName=t.nodeName.toLowerCase(),this._elType=t.type,this._isKeyed="textarea"===this._elName||h.indexOf(this._elType)>-1,this._runValidatorsBounded=this._runValidators.bind(this),this._initListeners()}var a=t("./validator-repo"),s=t("./state-enum"),r=t("./validation-state"),o=t("./input-state"),u=t("./constants"),l=t("./dom-helpers"),d=u.validInputTagNames,h=u.keyStrokedInputTypes;n.prototype=function(){function t(){if("input"===this._el.nodeName.toLowerCase()&&("radio"===this._el.type||"checkbox"===this._el.type)){var t=document.querySelector('input[name="'+this._el.name+'"]:checked');t?(this._el=t,this._inputState.isNoneChecked=!1):this._inputState.isNoneChecked=!0}}function e(){(0===this._inputState.validationCycle||this._inputState.isChanged)&&this._runValidatorsBounded()}function i(t){this._isKeyed&&t!==this._inputState.activeEventType&&(this._removeActiveEventType(),this._addEventType(t))}function n(t){this._group=t}function a(){this._addChangeListener(),this._isKeyed?this._addEventType("blur"):this._addEventType("change")}function u(t,e){this._inputState.validationCycle++,this._reBindCheckedElement(),"function"==typeof this._group.onBeforeValidation&&this._group.onBeforeValidation(this._el);for(var i,n,a=e||0;a<this._validators.length;a++){var o=this._validators[a],u=this._inputState.isNoneChecked?"":this._el.value,l=o.run(u,this._getUpdateInputValidationResultAsync(o.name,a,this._inputState.validationCycle));if(l.stateEnum!==s.valid){i=l,n=o.name,this._isBlurOnly||this._changeEventType("input");break}}i=i||new r("",s.valid),this._updateInputValidationResult(i,n),this._inputState.isChanged=!1,"function"==typeof this._group.onAfterValidation&&this._group.onAfterValidation(this._el)}function l(){this._removeActiveEventType(),this._initListeners(),this._inputState=new o,this._onInputValidationResult(this._el,s.valid,"",s)}function d(){var t=this;if(this._isKeyed){if(this._isBlurOnly)return;this._el.addEventListener("input",function(){t._inputState.isChanged=!0},!1)}else if("input"!==this._elName||"radio"!==this._elType&&"checkbox"!==this._elType)"select"===this._elName&&this._el.addEventListener("change",function(){t._inputState.isChanged=!0},!1);else for(var e=document.querySelectorAll('input[name="'+this._el.name+'"]'),i=0;i<e.length;i++)e[i].addEventListener("change",function(){t._inputState.isChanged=!0},!1)}function h(t){if(this._isKeyed)this._el.addEventListener(t,this._runValidatorsBounded,!1);else if("input"!==this._elName||"radio"!==this._elType&&"checkbox"!==this._elType)"select"===this._elName&&this._el.addEventListener(t,this._runValidatorsBounded,!1);else for(var e=document.querySelectorAll('input[name="'+this._el.name+'"]'),i=0;i<e.length;i++)e[i].addEventListener(t,this._runValidatorsBounded,!1);this._inputState.activeEventType=t}function p(){this._el.removeEventListener(this._inputState.activeEventType,this._runValidatorsBounded,!1)}function c(t,e,i){var n=this;return function(a){i&&i!==n._inputState.validationCycle||(a.stateEnum===s.valid&&e+1<n.validators.length?n._runValidatorsBounded(null,e+1):n._updateInputValidationResult(a,t))}}function v(t,e){this._group.updateGroupStates(this._inputState.validationState,t),this._group.updateGroupListeners(),this._inputState.validationState=t,this._onInputValidationResult(this._el,t,e,s)}return{triggerValidation:e,setGroup:n,reset:l,_reBindCheckedElement:t,_runValidators:u,_changeEventType:i,_initListeners:a,_addChangeListener:d,_addEventType:h,_removeActiveEventType:p,_getUpdateInputValidationResultAsync:c,_updateInputValidationResult:v}}(),e.exports=n},{"./constants":1,"./dom-helpers":2,"./input-state":5,"./state-enum":7,"./validation-state":8,"./validator-repo":9}],7:[function(t,e,i){var n={invalid:1,pending:2,valid:3};e.exports=n},{}],8:[function(t,e,i){function n(t,e){this.message=t,this.stateEnum=e}e.exports=n},{}],9:[function(t,e,i){function n(t,e){if("function"!=typeof e)throw"error while trying to register a Validator: argument must be a function";o[t]=e}function a(t,e){if("function"!=typeof o[t])throw t+" does not exists. use addValidatorBuilder to add a new validation rule";return o[t](r,s,e)}var s=t("./state-enum"),r=t("./validation-state"),o={};e.exports={addBuilder:n,build:a}},{"./state-enum":7,"./validation-state":8}],vivalid:[function(t,e,i){"use strict";var n=t("./input"),a=t("./input-group"),s=t("./validator-repo"),r=t("./html-interface"),o=t("./constants");e.exports={VERSION:o.VERSION,Input:n,InputGroup:a,validatorRepo:s,htmlInterface:r,_ERROR:o.ERROR}},{"./constants":1,"./html-interface":3,"./input":6,"./input-group":4,"./validator-repo":9}]},{},["vivalid"]))("vivalid")});